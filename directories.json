["finalwork","section1-1","section1-q1","section2-1","section2-2","section2-3","section2-q1","section2-q2","section2-q3","section2-q4","section3-1","section3-2","section3-3","section3-4","section3-q1","section4-1","section4-2","section4-q1","section4-q2","section5-1","section5-2","section5-3","section5-4","section5-q1"]
let house=[];

const g = 1;     // 重力（いろいろな値を試してみましょう）
const jump = 20; // ジャンプ力（いろいろな値を試してみましょう）
const ground = 20;
const size = 20;

let x, y, vy, gy;

function setup() {
  createCanvas(500, 500);
 
  
  x = 10;
  y = height - ground - size / 2;
  vy = 0;
  gy = height - ground;
  
}

function building(x,y,a,b){
  house.push({positionX:x, positionY:y, sizeX:a, sizeY:b});
  fill(255);
  stroke(0,0,0);
  rect(x,y-b,a,b);
  rect(x+a,y-(b+20),a,b+20);
}


function draw() {
  background(117,227,255)
  line(0, gy, width, gy); // 地面の線
   
  building(50,gy,30,80)
  building(150,gy,40,60)
  building(250,gy,10,180)
  building(290,gy,15,150)
  building(350,gy,40,50)
  ellipse(x, y, size, size)
  let tempoX=x
  let tempoY=y
  
 
  y += vy;
  
  if(y < height - ground - size / 2){ // 地面より上、つまり空中にいる
    vy += 0.5*g; // 下方向に重力の影響で加速する
  }
  else{
    vy = 0;
    y = height - ground - size / 2;
  }
 
if(keyIsDown(LEFT_ARROW)){x-=2;}
if(keyIsDown(RIGHT_ARROW)){x+=2;}

  for(let i =0; i<house.length; i++){
    if(x>house[i].positionX && x<house[i].positionX+house[i].sizeX && y>house[i].positionY-house[i].sizeY ){
      x=tempoX
      y=tempoY
  }
    if(x>house[i].positionX+house[i].sizeX && x<house[i].positionX+2*house[i].sizeX && y>house[i].positionY-house[i].sizeY-20 ){
      x=tempoX
      y=tempoY
  }
}}

function keyPressed(){
   if(keyCode === UP_ARROW){
    if(y>1/2*height){vy=-0.5*jump;}
    else{vy+= g}}
}



